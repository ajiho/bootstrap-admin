{# 继承母模板 #}
{% extends "base.twig" %}

{% block css %}
  {% block mainCss %}{% endblock %}
{% endblock %}

{% block content %}
  <!--wrapper开始-->
  <div class="bsa-wrapper">
    {% include 'header.twig' %}
    {% include 'sidebar.twig' %}
    <!--页面内容包裹开始-->
    <div class="bsa-content-wrapper">
      <!--内容真正的放置区域-->
      {% block mainContent %}{% endblock %}
    </div>
    <!--页面内容包裹结束-->
    {% include 'footer.twig' %}
  </div>
  <!--wrapper结束-->
  {% include 'switcher-wrapper.twig' %}
{% endblock %}


{% block js %}
  <!--bootstrap-admin主页面js文件-->
  <script src="js/bootstrap-admin.main.js"></script>
  <!--用于防止侧边栏菜单打开时主页面还可以滑动的问题(滑动穿透问题)-->
  <script src="lib/tua-body-scroll-lock/dist/tua-bsl.umd.js"></script>
  <script>
    $(document).ready(function () {
      // 退出登录前询问
      $(document).on('click', `.bsa-logout-trigger`, function () {

        layer.confirm('确定退出登录吗？', {
          btn: ['确定', '关闭'] //按钮
        }, function () {

          //发起ajax请求
          $.ajax({
            url: '/logout'
          }).then(response => {
            if (response.code === 200) {

              layer.msg('退出成功', {
                time: 1000,
                end: function () { // 关闭时的回调函数
                  //直接跳转到首页
                  location.replace('login.html')
                }
              });
            }
          });
        });

      })

    })
  </script>
  {% block mainJs %}{% endblock %}
{% endblock %}
