{% set mainPage = '我的设置' %}
{% set page = '个人资料' %}

{% from './components/breadcrumb.twig' import breadcrumb %}


{% extends "layout/main.twig" %}

{% block mainContent %}
  <div class="container-fluid p-3">

    {{ breadcrumb(['设置','我的设置','个人资料']) }}

    <div class="row g-3 mb-3">
      <div class="col">
        <div class="card border-0 shadow-sm">
          <div class="card-header bg-body">
            设置我的资料
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-5">
                <form id="form">
                  <div class="row mb-3">
                    <label for="role" class="col-sm-3 col-form-label text-sm-end">我的角色</label>
                    <div class="col-sm-9">
                      <select class="form-select" name="role" aria-label="role" id="role">
                        <option value="1" selected>超级管理员</option>
                        <option value="2" disabled>普通管理员</option>
                        <option value="3" disabled>审核员</option>
                        <option value="4" disabled>编辑员</option>
                      </select>
                      <div class="form-text">当前角色不可更改为其它角色</div>
                    </div>

                  </div>
                  <div class="row mb-3">
                    <label for="username" class="col-sm-3 col-form-label text-sm-end">用户名</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="username" name="username" readonly value="admin88"
                             disabled>
                      <div class="form-text">不可修改。一般用于后台登入名</div>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label for="nickname" class="col-sm-3 col-form-label text-sm-end">昵称</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="nickname" name="nickname" value="欲饮琵琶码上催">
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label for="nickname" class="col-sm-3 col-form-label text-sm-end">性别</label>
                    <div class="col-sm-9">
                      <div class="d-flex align-items-center h-100">
                        <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                                 value="option1" checked>
                          <label class="form-check-label" for="inlineRadio1">男</label>
                        </div>
                        <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                                 value="option2">
                          <label class="form-check-label" for="inlineRadio2">女</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label for="nickname" class="col-sm-3 col-form-label text-sm-end">头像</label>
                    <div class="col-sm-9">
                      <div class="input-group mb-3">
                        <input type="file" class="form-control" id="avatar" name="avatar">
                        <label class="input-group-text" for="avatar"><i class="bi bi-cloud-upload"></i> 上传图片</label>
                      </div>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label for="phone" class="col-sm-3 col-form-label text-sm-end">手机</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="phone" name="phone" value="19978451354">
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label for="email" class="col-sm-3 col-form-label text-sm-end">邮箱</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="email" name="email" value="lujiahao@88.com">
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label for="desc" class="col-sm-3 col-form-label text-sm-end">备注</label>
                    <div class="col-sm-9">
                      <textarea class="form-control" id="desc" rows="3" name="desc"></textarea>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <div class="col-sm-9 offset-sm-3">
                      <button type="submit" class="btn btn-primary">确认修改</button>
                    </div>
                  </div>

                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
{% endblock %}


{% block mainJs %}
  <script src="lib/formvalidation/js/formValidation.js"></script>
  <script src="lib/formvalidation/js/framework/bootstrap.js"></script>
  <script src="lib/formvalidation/js/language/zh_CN.js"></script>
  <script>
    $(document).ready(function () {
      $('#form').formValidation({
        fields: {
          desc: {
            validators: {
              notEmpty: true,
            }
          }
        }
      }).on('success.form.fv', function (e) {
        //阻止表单提交
        e.preventDefault();
        //得到表单对象
        const $form = $(e.target);
        const data = $form.serialize();

        //得到序列化数据
        $.ajax({
          url: "/login.php",
          method: 'POST',
          data
        }).then(function (res) {
          if (res.code === 200) {
            //登录成功
          } else {
            //登录失败
          }
        });

      });
    })

  </script>
{% endblock %}
